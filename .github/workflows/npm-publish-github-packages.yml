name: Node.js Package

on:
  release:
    types: [created]
  workflow_dispatch:

jobs:
  test-helm:
    runs-on: self-hosted
    steps:
      - name: Set up Kubernetes credentials
        run: |
          echo "$KUBECONFIG_CONTENT" > ~/.kube/config
          # Verify Helm installation
          helm version
          
          # Verify Kubernetes access
          kubectl get nodes
          
          # List Helm releases in the ingress-nginx namespace
          helm list -n ingress-nginx || echo "No releases found or unable to connect to the Kubernetes cluster."
